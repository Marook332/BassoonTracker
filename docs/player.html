<h2>Standalone player</h2>
<div id="info">
    BassoonTracker provides a standalone player library that you can use in your own projects, to play module files without the tracker interface.<br>
    In addition to playing songs, you can also trigger samples individually.<br>
    This is especially well-suited for small (web) games:
    <ul>
        <li>.mod and .xm files are usually much smaller than .mp3 files</li>
        <li>You can have several looping "subsongs" in 1 file, so for example you could have a different tune for each game section without loading additional data</li>
        <li>You can embed your sound-FX samples in the same file and still one-shot play them</li>
    </ul>
    The complete playback library is only 16.6 kb when gzipped (48 kb when uncompressed).<br>
    Although the BassoonTracker standalone player is not the most complete mod-player on the web, it is the smallest and most CPU friendly one, playing without hickups even on mobile devices and older PC's.<br>
    <br>
    You'll find a <a href="https://www.stef.be/bassoontracker/player/" target="_blank">simple example here</a>.<br>
    Hit the "play" button above to start the playback.<br>

    
    <h3>Library and sample code</h3>
    Download the <a href="https://www.stef.be/bassoontracker/player/script/bassoonplayer-min.js">bassoonplayer-min.js file</a>, include it in your project, and you're good to go!<br>
    If you need to support older browsers or zipped .mod files, you can use the <a href="https://www.stef.be/bassoontracker/player/old/">Legacy Player</a> instead.<br>
    <br>
    The most simple example would be:
    <xmp>
        <script src="bassoonplayer-min.js" type="module"></script>
        <script>
            BassoonTracker.load("url/to/file.mod").then(
                BassoonTracker.play
            );
        </script>
    </xmp>


    Or if you want to <a href="https://www.stef.be/bassoontracker/player/import.html" target="_blank">import</a> the library in a module-based project, you can use something like:
    <xmp>
        import BassoonTracker from './bassoonplayer-min.js';

        await BassoonPlayer.load("url/to/file.mod");
        BassoonPlayer.play();
    </xmp>


    Please note that most browsers disable audio playback until a user action, so you will probably need a "play" button to initiate playback.<br>


    <h3>Useful methods</h3>
    <ul>
        <li><code>BassoonTracker.play()</code></li>
        <li><code>BassoonTracker.stop()</code></li>
        <li><code>BassoonTracker.togglePlay()</code></li>
        <li><code>BassoonTracker.isPlaying()</code></li>
        <li><code>BassoonTracker.getSong()</code> <span>(gets the current song)</span>
            <ul>
                <li><code>BassoonTracker.getSong().title</code></li>
                <li><code>BassoonTracker.getSong().length</code> <span>(in patterns)</span></li>
                <li><code>BassoonTracker.getSong().patterns</code> <span>(array of patterns)</span></li>
                <li><code>BassoonTracker.getSong().patternTable</code> <span>(array of pattern positions in the song)</span></li>
                <li><code>BassoonTracker.getSong().instruments</code> <span>(array instruments/samples in the song)</span></li>
            </ul>
        </li>
        <li><code>BassoonTracker.setCurrentSongPosition(songPos)</code></li>
        <li><code>BassoonTracker.audio</code> (pointer to the main audio object)</li>
        <li><code>BassoonTracker.audio.playSample(sampleIndex,sampleRate)</code></li>
    </ul>
    
    
    <h3>Indicating playback progress</h3>
    
    The playback itself is scheduled in WebAudio and completely detached from the main JavaScript thread.<br>
    Therefore, there are no direct events to indicate playback progress.<br>
    If you want to display some UI with a progress indicator, you will have to keep track of the start time of the song (<code>Audio.context.currentTime</code>)
    and call
    <code>BassoonTracker.getStateAtTime(time)</code> periodically <br>(or <code>BassoonTracker.getTimeStates()</code> to get the complete list).<br>
    Note that the player schedules audio ahead, so the last item in the <code>BassoonTracker.getTimeStates()</code> list will be in the future.<br>

    <h3>Displaying pattern data</h3>
    When a song is playing you can get the current pattern and row that is being played with <code>BassoonTracker.getStateAtTime(BassoonTracker.audio.context.currentTime)</code><br>
    This returns an object with 2 properties: songPos and patternPos.<br>
    You can then get the current pattern using BassoonTracker.getSong().patterns[BassoonTracker.getSong().patternTable[songPos]]<br>
    For a full example, please refer to the <a href="https://www.stef.be/bassoontracker/player/pattern.html" target="_blank">Pattern View demo</a>
    <br>
    

    <h3>Adjusting volume</h3>
    If you want to adjust to volume, you can use <code>BassoonTracker.audio.masterVolume</code> which is a <a href="https://developer.mozilla.org/en-US/docs/Web/API/GainNode">WebAudio GainNode</a>.<br>
    If you want to adjust the volume for a specific track (e.g. to mute it), you can access each tracks audio output using <code>BassoonTracker.audio.filterChains[i].output()</code> which is a <a href="https://developer.mozilla.org/en-US/docs/Web/API/GainNode">WebAudio GainNode</a>. (where i is the 0-based index of the track)<br>
    
    
    <h3>More advanced player examples</h3>
    
    Here is a <a href="http://www.stef.be/bassoontracker/player/progress.html" target="_blank">more advanced example</a> of the player, with a playlist, a progress bar, a volume selector, and an audio visualization area.
    <a href="http://www.stef.be/bassoontracker/player/progress.html" target="_blank"><img src="_img/player.png" border="0"></a><br><br>

    And finally an <a href="http://www.stef.be/bassoontracker/player/pattern.html" target="_blank">expanded example</a> with an additional pattern view.

</div>
